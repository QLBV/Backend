<div align="center">

### Há»† THá»NG QUáº¢N LÃ PHÃ’NG KHÃM TÆ¯ HEALTHCARE

[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=for-the-badge&logo=node.js&logoColor=white)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-5.2-000000?style=for-the-badge&logo=express&logoColor=white)](https://expressjs.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1?style=for-the-badge&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Sequelize](https://img.shields.io/badge/Sequelize-6.37-52B0E7?style=for-the-badge&logo=sequelize&logoColor=white)](https://sequelize.org/)

[TÃ­nh nÄƒng](#-tÃ­nh-nÄƒng) â€¢ [CÃ´ng nghá»‡](#-cÃ´ng-nghá»‡) â€¢ [Báº¯t Ä‘áº§u](#-báº¯t-Ä‘áº§u) â€¢ [CÆ¡ sá»Ÿ dá»¯ liá»‡u](#ï¸-cÆ¡-sá»Ÿ-dá»¯-liá»‡u)

</div>

---

## ğŸ“‹ Tá»•ng quan

Backend lÃ  Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i Node.js, Express vÃ  TypeScript. NÃ³ cung cáº¥p cÃ¡c endpoint toÃ n diá»‡n Ä‘á»ƒ quáº£n lÃ½ cÃ¡c hoáº¡t Ä‘á»™ng chÄƒm sÃ³c sá»©c khá»e bao gá»“m há»“ sÆ¡ bá»‡nh nhÃ¢n, lá»‹ch háº¹n, Ä‘Æ¡n thuá»‘c, hÃ³a Ä‘Æ¡n, kho thuá»‘c vÃ  quáº£n lÃ½ nhÃ¢n viÃªn.

## âœ¨ TÃ­nh nÄƒng

### ğŸ” XÃ¡c thá»±c & Báº£o máº­t
- **XÃ¡c thá»±c JWT** vá»›i access & refresh token
- **OAuth 2.0** tÃ­ch há»£p (ÄÄƒng nháº­p Google)
- **Kiá»ƒm soÃ¡t truy cáº­p dá»±a trÃªn vai trÃ² (RBAC)** - Admin, BÃ¡c sÄ©, Lá»… tÃ¢n, Bá»‡nh nhÃ¢n
- **MÃ£ hÃ³a máº­t kháº©u** vá»›i bcrypt
- **Giá»›i háº¡n tá»‘c Ä‘á»™** Ä‘á»ƒ ngÄƒn cháº·n láº¡m dá»¥ng
- **Helmet.js** cho security headers
- **Cáº¥u hÃ¬nh CORS**

### ğŸ‘¥ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
- ÄÄƒng kÃ½ & Ä‘Äƒng nháº­p ngÆ°á»i dÃ¹ng
- XÃ¡c minh email
- Äáº·t láº¡i máº­t kháº©u qua email
- Quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n
- Quáº£n lÃ½ vai trÃ² & quyá»n háº¡n

### ğŸ“… Há»‡ thá»‘ng lá»‹ch háº¹n
- Äáº·t lá»‹ch online & offline
- Quáº£n lÃ½ tráº¡ng thÃ¡i lá»‹ch háº¹n
- Kiá»ƒm tra lá»‹ch trá»‘ng cá»§a bÃ¡c sÄ©
- Nháº¯c nhá»Ÿ lá»‹ch háº¹n (cron jobs)
- Theo dÃµi lÆ°á»£t khÃ¡m

### ğŸ’Š Quáº£n lÃ½ Ä‘Æ¡n thuá»‘c
- Táº¡o, cáº­p nháº­t, khÃ³a Ä‘Æ¡n thuá»‘c
- Táº¡o Ä‘Æ¡n thuá»‘c Ä‘iá»‡n tá»­
- Xuáº¥t PDF vá»›i chá»¯ kÃ½
- Quy trÃ¬nh tráº¡ng thÃ¡i (NhÃ¡p â†’ ÄÃ£ khÃ³a â†’ ÄÃ£ cáº¥p phÃ¡t)

### ğŸ’° HÃ³a Ä‘Æ¡n & Thanh toÃ¡n
- Táº¡o hÃ³a Ä‘Æ¡n
- Theo dÃµi thanh toÃ¡n (Tiá»n máº·t, Chuyá»ƒn khoáº£n, QR)
- Há»— trá»£ thanh toÃ¡n tá»«ng pháº§n
- Xuáº¥t hÃ³a Ä‘Æ¡n PDF
- Lá»‹ch sá»­ thanh toÃ¡n

### ğŸ’Š NhÃ  thuá»‘c & Kho
- Thao tÃ¡c CRUD cho thuá»‘c
- Quáº£n lÃ½ tá»“n kho
- Theo dÃµi nháº­p/xuáº¥t
- Cáº£nh bÃ¡o tá»“n kho tháº¥p
- Theo dÃµi lÃ´ & háº¡n sá»­ dá»¥ng

### ğŸ‘¨â€âš•ï¸ Quáº£n lÃ½ bÃ¡c sÄ© & nhÃ¢n viÃªn
- Há»“ sÆ¡ bÃ¡c sÄ© & chuyÃªn khoa
- Láº­p lá»‹ch ca trá»±c
- Theo dÃµi cháº¥m cÃ´ng
- Quáº£n lÃ½ lÆ°Æ¡ng
- TÃ­nh toÃ¡n tiá»n lÆ°Æ¡ng

### ğŸ“Š BÃ¡o cÃ¡o & PhÃ¢n tÃ­ch
- BÃ¡o cÃ¡o tÃ i chÃ­nh (PDF/Excel)
- Thá»‘ng kÃª lá»‹ch háº¹n
- ThÃ´ng tin nhÃ¢n kháº©u há»c bá»‡nh nhÃ¢n
- BÃ¡o cÃ¡o sá»­ dá»¥ng thuá»‘c
- PhÃ¢n tÃ­ch doanh thu

### ğŸ”” ThÃ´ng bÃ¡o
- ThÃ´ng bÃ¡o email (Nodemailer)
- ThÃ´ng bÃ¡o trong á»©ng dá»¥ng
- Nháº¯c nhá»Ÿ lá»‹ch háº¹n
- Cáº£nh bÃ¡o há»‡ thá»‘ng

## ğŸ›  CÃ´ng nghá»‡

### Framework cá»‘t lÃµi
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch |
|-----------|-----------|----------|
| **Node.js** | 18+ | MÃ´i trÆ°á»ng Runtime |
| **Express.js** | 5.2 | Web Framework |
| **TypeScript** | 5.9 | Type Safety |

### CÆ¡ sá»Ÿ dá»¯ liá»‡u & ORM
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **MySQL** | CÆ¡ sá»Ÿ dá»¯ liá»‡u chÃ­nh |
| **Sequelize** | ORM & Migrations |
| **Redis (ioredis)** | Caching & Sessions |

### Báº£o máº­t
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **JWT** | XÃ¡c thá»±c Token |
| **bcrypt** | MÃ£ hÃ³a máº­t kháº©u |
| **Helmet** | Security Headers |
| **express-rate-limit** | Giá»›i háº¡n tá»‘c Ä‘á»™ |
| **Passport.js** | OAuth Strategies |

### TÃ i liá»‡u & Xuáº¥t file
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **PDFKit** | Táº¡o PDF |
| **ExcelJS** | Xuáº¥t Excel |
| **Chart.js** | Táº¡o biá»ƒu Ä‘á»“ |

### Tiá»‡n Ã­ch
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **Nodemailer** | Dá»‹ch vá»¥ Email |
| **Winston** | Logging |
| **Morgan** | HTTP Logging |
| **node-cron** | Scheduled Jobs |
| **Multer** | Upload File |

### Testing
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **Jest** | Testing Framework |
| **Supertest** | HTTP Testing |
| **ts-jest** | TypeScript Support |

## ğŸš€ Báº¯t Ä‘áº§u

### YÃªu cáº§u

- **Node.js** >= 18.x
- **MySQL** >= 8.0
- **Redis** (tÃ¹y chá»n, cho caching)
- **npm** >= 9.x

### CÃ i Ä‘áº·t

1. **Clone repository**
   ```bash
   git clone https://github.com/QLBV/Backend.git
   cd Backend
   ```

2. **CÃ i Ä‘áº·t dependencies**
   ```bash
   npm install
   ```

3. **Thiáº¿t láº­p mÃ´i trÆ°á»ng**
   
   Sao chÃ©p file mÃ´i trÆ°á»ng máº«u:
   ```bash
   cp .env.example .env
   ```
   
   Cáº¥u hÃ¬nh file `.env`:
   ```env
   # Server
   PORT=5000
   NODE_ENV=development
   
   # Database
   DB_HOST=localhost
   DB_PORT=3306
   DB_NAME=healos_db
   DB_USER=root
   DB_PASSWORD=your_password
   
   # JWT
   JWT_SECRET=your_super_secret_key
   JWT_EXPIRES_IN=1d
   JWT_REFRESH_SECRET=your_refresh_secret
   JWT_REFRESH_EXPIRES_IN=7d
   
   # Email (SMTP)
   MAIL_HOST=smtp.gmail.com
   MAIL_PORT=587
   MAIL_USER=your_email@gmail.com
   MAIL_PASS=your_app_password
   
   # Google OAuth
   GOOGLE_CLIENT_ID=your_google_client_id
   GOOGLE_CLIENT_SECRET=your_google_client_secret
   
   # Redis (tÃ¹y chá»n)
   REDIS_HOST=localhost
   REDIS_PORT=6379
   
   # Frontend URL
   FRONTEND_URL=http://localhost:5173
   ```

4. **Thiáº¿t láº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u**
   
   Táº¡o database:
   ```bash
   mysql -u root -p -e "CREATE DATABASE healthcare_db;"
   ```
   
   Cháº¡y migrations:
   ```bash
   npx sequelize-cli db:migrate
   ```
   
   Seed dá»¯ liá»‡u ban Ä‘áº§u:
   ```bash
   npx sequelize-cli db:seed:all
   ```
   
   (TÃ¹y chá»n) Seed dá»¯ liá»‡u máº«u lá»›n Ä‘á»ƒ test:
   ```bash
   npm run seed:data
   ```

5. **Khá»Ÿi Ä‘á»™ng Development Server**
   ```bash
   npm run dev
   ```
   
   API sáº½ cháº¡y táº¡i `http://localhost:5000`

### Build cho Production

```bash
npm run build
npm start
```

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
src/
â”œâ”€â”€ config/              # File cáº¥u hÃ¬nh
â”‚   â”œâ”€â”€ database.ts      # Káº¿t ná»‘i database
â”‚   â”œâ”€â”€ passport.ts      # OAuth strategies
â”‚   â””â”€â”€ redis.ts         # Káº¿t ná»‘i Redis
â”œâ”€â”€ constant/            # Háº±ng sá»‘ á»©ng dá»¥ng
â”œâ”€â”€ controllers/         # Route controllers
â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”œâ”€â”€ appointment.controller.ts
â”‚   â”œâ”€â”€ patient.controller.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ events/              # Event emitters
â”œâ”€â”€ jobs/                # Scheduled cron jobs
â”œâ”€â”€ middlewares/         # Express middlewares
â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”œâ”€â”€ validate.middleware.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ models/              # Sequelize models
â”‚   â”œâ”€â”€ User.ts
â”‚   â”œâ”€â”€ Patient.ts
â”‚   â”œâ”€â”€ Doctor.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/              # API routes
â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”œâ”€â”€ patient.routes.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/            # Business logic
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ email.service.ts
â”‚   â”œâ”€â”€ reportPDF.service.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ templates/           # Email templates
â”œâ”€â”€ tests/               # Test files
â”œâ”€â”€ types/               # TypeScript definitions
â”œâ”€â”€ utils/               # Utility functions
â”œâ”€â”€ app.ts               # Express app setup
â””â”€â”€ server.ts            # Server entry point

migrations/              # Database migrations
seeders/                 # Database seeders
uploads/                 # ThÆ° má»¥c upload file
logs/                    # Application logs
postman/                 # Postman collections
```

## ğŸ—„ï¸ CÆ¡ sá»Ÿ dá»¯ liá»‡u

### Má»‘i quan há»‡ thá»±c thá»ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚â”€â”€â”€â”€â–¶â”‚   Patient   â”‚â”€â”€â”€â”€â–¶â”‚    Visit    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â–¼
       â–¼                   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚           â”‚ Prescriptionâ”‚
â”‚   Doctor    â”‚            â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                   â”‚
       â”‚                   â”‚                   â–¼
       â–¼                   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Invoice   â”‚
â”‚ DoctorShift â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CÃ¡c Model chÃ­nh
- **User** - TÃ i khoáº£n ngÆ°á»i dÃ¹ng cÆ¡ báº£n
- **Patient** - Há»“ sÆ¡ bá»‡nh nhÃ¢n
- **Doctor** - Há»“ sÆ¡ bÃ¡c sÄ© & chuyÃªn khoa
- **Appointment** - Há»“ sÆ¡ Ä‘áº·t lá»‹ch
- **Visit** - LÆ°á»£t khÃ¡m & kiá»ƒm tra y táº¿
- **Prescription** - ÄÆ¡n thuá»‘c
- **Invoice** - HÃ³a Ä‘Æ¡n & thanh toÃ¡n
- **Medicine** - Kho thuá»‘c
- **DoctorShift** - Lá»‹ch trá»±c
- **Attendance** - Cháº¥m cÃ´ng nhÃ¢n viÃªn
- **Payroll** - Quáº£n lÃ½ lÆ°Æ¡ng

## ğŸ“œ CÃ¡c lá»‡nh cÃ³ sáºµn

| Lá»‡nh | MÃ´ táº£ |
|------|-------|
| `npm run dev` | Khá»Ÿi Ä‘á»™ng development server (nodemon) |
| `npm run build` | BiÃªn dá»‹ch TypeScript |
| `npm start` | Khá»Ÿi Ä‘á»™ng production server |
| `npm test` | Cháº¡y táº¥t cáº£ tests |
| `npm run test:watch` | Cháº¡y tests á»Ÿ cháº¿ Ä‘á»™ watch |
| `npm run test:coverage` | Táº¡o bÃ¡o cÃ¡o coverage |
| `npm run seed:data` | Seed database vá»›i dá»¯ liá»‡u máº«u lá»›n |

## ğŸ¤ ÄÃ³ng gÃ³p

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/tinh-nang-tuyet-voi`)
3. Commit thay Ä‘á»•i (`git commit -m 'feat: ThÃªm tÃ­nh nÄƒng tuyá»‡t vá»i'`)
4. Push lÃªn branch (`git push origin feature/tinh-nang-tuyet-voi`)
5. Má»Ÿ Pull Request

### Quy Æ°á»›c Commit
```
feat: TÃ­nh nÄƒng má»›i
fix: Sá»­a lá»—i
docs: TÃ i liá»‡u
refactor: TÃ¡i cáº¥u trÃºc code
test: Testing
chore: Báº£o trÃ¬
```

## ğŸ“„ Giáº¥y phÃ©p

Dá»± Ã¡n nÃ y lÃ  pháº§n má»m Ä‘á»™c quyá»n. Báº£o lÆ°u má»i quyá»n.

## ğŸ‘¥ Äá»™i ngÅ©

PhÃ¡t triá»ƒn vá»›i â¤ï¸ bá»Ÿi Äá»™i ngÅ© PhÃ¡t triá»ƒn HealthCare

---

<div align="center">

**[â¬† Vá» Ä‘áº§u trang](#-healthcare-backend-api)**

</div>
